// Example state configuration using Pkl
amends "base_config.pkl"

// Define individual states
ee_position_state: StateConfig = new {
  name = "ee_position"
  type = "Euler"
  success_mode = "Area"
  lower_bound = List(-0.5, -0.5, 0.0)
  upper_bound = List(0.5, 0.5, 1.0)
  threshold = 0.02
  space = List("Minimal", "Normal", "Full")
}

ee_rotation_state: StateConfig = new {
  name = "ee_rotation"
  type = "Quaternion"
  success_mode = "Precise"
  lower_bound = List(-1.0, -1.0, -1.0, -1.0)
  upper_bound = List(1.0, 1.0, 1.0, 1.0)
  space = List("Normal", "Full")
}

drawer_state: StateConfig = new {
  name = "drawer_state"
  type = "Range"
  success_mode = "Precise"
  lower_bound = List(0.0)
  upper_bound = List(0.4)
  space = List("Minimal", "Normal", "Full", "Debug")
}

// Define a complete task configuration
open_drawer_task: TaskConfig = new {
  name = "open_drawer"
  description = "Open the drawer completely"
  states = Map(
    "ee_position", ee_position_state,
    "ee_rotation", ee_rotation_state,
    "drawer_state", drawer_state
  )
  success_conditions = List("drawer_state > 0.35")
}

// Export configurations
output {
  states = Map(
    "ee_position", ee_position_state,
    "ee_rotation", ee_rotation_state,
    "drawer_state", drawer_state
  )
  tasks = Map(
    "open_drawer", open_drawer_task
  )
}
